## 12 | 套路篇：CPU 性能优化的几个思路

## 性能优化方法论

动手之前的三个问题
+ 如何判断优化有效，并且优化后能提升多高的性能？
+ 性能问题通常不是独立的，有多个性能问题时，应该优先优化哪一个
+ 提升性能的方法不唯一，如何选择？


### 如何评估性能优化的效果
主要从这三个指标去分析：

+确定性能的量化指标。
+测试优化前的性能指标。
+测试优化后的性能指标。

#### 首先确定性能量化指标
不要局限在单一维度的指标上，至少从应用程序和系统资源两个维度,以web应用为例：
+ 应用程序的维度：吞吐量和请求延迟
+ C系统资源维度：CPU使用率

#### 测试优化前后的性能指标
主要通过相应的工具 来查看优化前后的指标状况，但特别需要注意：

+ 避免性能测试工具带来的干扰
+避免外部环境的变化影响性能指标

### 多个性能问题同时存在，如何选择

二八原则：80%的问题都是由20%的代码导致的

找到最重要的，可以最大程序提升性能的问题。

简化过程的方式：
+ 如果系统资源达到瓶颈，则首先优化系统资源问题
+ 针对不同类型的指标，首先优化那些由瓶颈导致的，性能指标变化幅度最大的问题，

### 多种优化方法如何选择

一般情况选择最大提升性能的方法，但性能优化也有成本。需要综合分析

## 优化案例（CPU优化）




